--- setup.py.after-use-system-libtorrent-patch	2007-03-02 20:28:40.000000000 -0800
+++ setup.py	2007-03-02 20:30:06.000000000 -0800
@@ -72,67 +72,6 @@
 for plugin in glob.glob('plugins/*'):
 	data.append( ('share/deluge/' + plugin, glob.glob(plugin + '/*')) )
 
-# Thanks to Iain Nicol for code to save the location for installed prefix
-# At runtime, we need to know where we installed the data to.
-import shutil
-from distutils import cmd
-from distutils.command.install import install as _install
-
-class write_data_install_path(cmd.Command):
-	description = 'saves the data installation path for access at runtime'
-	
-	def initialize_options(self):
-		self.data_install_dir = None
-		self.lib_build_dir = None
-
-	def finalize_options(self):
-		self.set_undefined_options('install',
-			('install_data', 'data_install_dir')
-		)		
-		self.set_undefined_options('build',
-			('build_lib', 'lib_build_dir')
-		)
-
-	def run(self):
-		conf_filename = os.path.join(self.lib_build_dir,
-			'deluge', 'dcommon.py')
-
-		conf_file = open(conf_filename, 'r')
-		data = conf_file.read()
-		conf_file.close()
-		data = data.replace('@datadir@', self.data_install_dir)
-
-		conf_file = open(conf_filename, 'w')
-		conf_file.write(data)
-		conf_file.close()
-
-class unwrite_data_install_path(cmd.Command):
-	description = 'undoes write_data_install_path'
-
-	def initialize_options(self):
-		self.lib_build_dir = None
-
-	def finalize_options(self):		
-		self.set_undefined_options('build',
-			('build_lib', 'lib_build_dir')
-		)
-
-	def run(self):
-		dest = os.path.join(self.lib_build_dir,
-			'deluge', 'dcommon.py')
-		shutil.copyfile('src/dcommon.py', dest)
-
-class install(_install):
-	sub_commands = [('write_data_install_path', None)] + \
-		_install.sub_commands + [('unwrite_data_install_path', None)]
-
-cmdclass = {
-	'install': install,
-	'write_data_install_path': write_data_install_path,
-	'unwrite_data_install_path': unwrite_data_install_path,
-}
-
-
 setup(name="deluge", fullname="Deluge BitTorrent Client", version="0.4.90.3",
 	author="Zach Tibbitts, Alon Zakai",
 	author_email="zach@collegegeek.org, kripkensteiner@gmail.com",
@@ -144,6 +83,5 @@
 	package_dir = {'deluge': 'src'},
 	data_files=data,
 	ext_package='deluge',
-	ext_modules=[deluge_core],
-	cmdclass=cmdclass
+	ext_modules=[deluge_core]
 	)
